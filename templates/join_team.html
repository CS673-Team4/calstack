<!DOCTYPE html>
<html>
<head>
    <title>Join Team</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f4f6fa; }
        .home-card {
            max-width: 500px;
            margin: 60px auto;
            padding: 2.5rem 2rem;
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 4px 24px rgba(0,0,0,0.09);
        }
        .brand {
            font-size: 2rem;
            font-weight: 700;
            color: #007bff;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="home-card">
        <div class="brand">CalStack</div>
        <h3 class="mb-4">Join a Team</h3>
        {% if error %}<div class="alert alert-danger">{{ error }}</div>{% endif %}
        <form method="post">
            <div class="mb-4">
                <label class="form-label">Team Code</label>
                <input type="text" name="team_code" id="team-code-input" class="form-control" value="{{ code or '' }}" required>
            </div>
            <button type="submit" id="join-team-btn" class="btn btn-primary w-100 mb-2">Join Team</button>
            <a href="{{ url_for('home') }}" class="btn btn-link w-100">Back to Home</a>
            <script>
            // If code is present, auto-submit the form for seamless invite link joining
            document.addEventListener('DOMContentLoaded', function() {
                var code = '{{ code or '' }}';
                if (code) {
                    // Only auto-submit if the user hasn't just seen an error
                    {% if not error %}
                    document.getElementById('team-code-input').value = code;
                    document.getElementById('join-team-btn').click();
                    {% endif %}
                }
            });
            </script>
        </form>
    </div>
</body>
</html>
